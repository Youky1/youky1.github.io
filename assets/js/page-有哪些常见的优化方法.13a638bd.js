(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{632:function(s,t,a){"use strict";a.r(t);var n=a(1),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"有哪些常见的优化方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#有哪些常见的优化方法"}},[s._v("#")]),s._v(" 有哪些常见的优化方法")]),s._v(" "),t("h2",{attrs:{id:"_1-代码层面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-代码层面"}},[s._v("#")]),s._v(" 1. 代码层面")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("区分使用 v-if 和 v-show")])]),s._v(" "),t("li",[t("strong",[s._v("v-for 遍历时必须使用 key，并且避免使用 v-if")]),s._v(" "),t("blockquote",[t("p",[s._v("v-for 的优先级比 v-if 高，所以会先遍历所有元素然后再隐藏。应该使用一个计算属性完成筛选工作")])])]),s._v(" "),t("li",[t("strong",[s._v("长列表冻结")]),s._v("：对于不需要响应式处理的数据，可以用"),t("code",[s._v("Object.freeze")]),s._v("将其冻结，这样该数据将"),t("strong",[s._v("不是响应式的")]),s._v("，但可以减少组件初始化消耗时间")]),s._v(" "),t("li",[s._v("如果在 js 中"),t("code",[s._v("addEventListener")]),s._v("绑定了事件监听，要记得"),t("strong",[s._v("解绑监听的事件")])]),s._v(" "),t("li",[t("strong",[s._v("图片懒加载")]),s._v("：\n"),t("ul",[t("li",[s._v("使用"),t("code",[s._v("vue-lazyload")]),s._v("插件")]),s._v(" "),t("li",[s._v("在模板中将 img 标签的 src 属性换位 v-lazy")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// main.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" VueLazyload "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vue-lazyload'")]),s._v("\nVue"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("VueLazyload"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// xx.vue")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("img v"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("lazy"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/static/img/1.png"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])]),s._v(" "),t("li",[t("strong",[s._v("路由懒加载")]),s._v("：当路由被访问时才加载相关组件"),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("Foo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./Foo.vue"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" router "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("VueRouter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("routes")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/foo"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("component")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Foo "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("li",[s._v("使用"),t("strong",[s._v("服务端渲染")]),s._v("或"),t("strong",[s._v("预渲染")])])]),s._v(" "),t("h2",{attrs:{id:"_2-webpack-层面的优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-webpack-层面的优化"}},[s._v("#")]),s._v(" 2. Webpack 层面的优化")]),s._v(" "),t("ul",[t("li",[s._v("使用"),t("code",[s._v("image-webpack-loader")]),s._v("插件对图片进行压缩")]),s._v(" "),t("li",[s._v("使用"),t("code",[s._v("babel-plugin-transform-runtime")]),s._v("插件去除 ES6 转 ES5 时的冗余代码")]),s._v(" "),t("li",[t("strong",[s._v("样式较少时")]),s._v("，使用"),t("code",[s._v("mini-css-extract-plugin")]),s._v("将组件的样式提取到同一个 css 文件中。同时要用"),t("code",[s._v("MiniCssExtractPlugin.loader")]),s._v("取代"),t("code",[s._v("style-loader")]),s._v("，目的是提取 JS 中的 css 样式")]),s._v(" "),t("li",[s._v("使用"),t("code",[s._v("terser-webpack-plugin")]),s._v("压缩 JS 代码")]),s._v(" "),t("li",[s._v("生产环境中不生成"),t("strong",[s._v("sourceMap")])]),s._v(" "),t("li",[s._v("启用"),t("strong",[s._v("treeShaking")]),s._v("、"),t("strong",[s._v("sideEffect")]),s._v("特性")])]),s._v(" "),t("h2",{attrs:{id:"_3-通用的-web-优化方案"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-通用的-web-优化方案"}},[s._v("#")]),s._v(" 3. 通用的 web 优化方案")]),s._v(" "),t("ul",[t("li",[s._v("开启 gzip 压缩，需要服务器端和客户端同时支持")]),s._v(" "),t("li",[s._v("浏览器缓存。")]),s._v(" "),t("li",[s._v("使用 CDN")])]),s._v(" "),t("h2",{attrs:{id:"_4-如何改善-spa-的-seo"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-如何改善-spa-的-seo"}},[s._v("#")]),s._v(" 4. 如何改善 SPA 的 SEO")]),s._v(" "),t("ul",[t("li",[s._v("服务端渲染 SSR")]),s._v(" "),t("li",[s._v("预渲染生成特定路由的静态页面")]),s._v(" "),t("li",[s._v("通过"),t("code",[s._v("URL Rewrite")]),s._v("的方法将外部请求的静态地址转换为实际的动态页面")]),s._v(" "),t("li",[s._v("使用"),t("code",[s._v("Phantomjs")]),s._v("配合"),t("code",[s._v("NGINX")]),s._v("对爬虫进行优化。即：\n"),t("ul",[t("li",[s._v("若是户访问，返回正常的 SPA 应用")]),s._v(" "),t("li",[s._v("若是爬虫，用"),t("code",[s._v("Phantomjs")]),s._v("返回页面信息")])])])]),s._v(" "),t("h2",{attrs:{id:"_5-如何改善-spa-的首屏时间"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-如何改善-spa-的首屏时间"}},[s._v("#")]),s._v(" 5. 如何改善 SPA 的首屏时间")]),s._v(" "),t("ul",[t("li",[s._v("服务端渲染 SSR")]),s._v(" "),t("li",[s._v("路由懒加载")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" routes "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/foo'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("component")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../components/Foo.vue'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("ul",[t("li",[s._v("对于静态资源进行本地缓存")]),s._v(" "),t("li",[s._v("针对 webpack 打包的优化")])])])}),[],!1,null,null,null);t.default=e.exports}}]);