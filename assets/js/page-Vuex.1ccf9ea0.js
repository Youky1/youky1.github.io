(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{608:function(t,s,a){"use strict";a.r(s);var e=a(1),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"介绍一下什么是-vuex"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍一下什么是-vuex"}},[t._v("#")]),t._v(" 介绍一下什么是 vuex")]),t._v(" "),s("p",[t._v("vuex 是一个转为 vue 开发的"),s("strong",[t._v("状态管理模式")]),t._v("。主要包括以下几部分：")]),t._v(" "),s("ul",[s("li",[s("strong",[s("em",[t._v("state")])]),t._v("：vuex 的核心，定义了数据结构，以及默认值。")]),t._v(" "),s("li",[s("strong",[s("em",[t._v("getter")])]),t._v("：相当于 vuex 中的计算属性。")]),t._v(" "),s("li",[s("strong",[s("em",[t._v("mutation")])]),t._v("：改变 state 中数据的"),s("strong",[t._v("唯一方式")]),t._v("。操作"),s("strong",[t._v("必须是同步")]),t._v("的。")]),t._v(" "),s("li",[s("strong",[s("em",[t._v("action")])]),t._v("：可以进行异步操作，通过"),s("strong",[t._v("提交 mutation")]),t._v("改变 state 的数据")]),t._v(" "),s("li",[s("strong",[s("em",[t._v("module")])]),t._v("：将代码拆分成多个 store 再汇总，以减少单一 store 的复杂程度")])]),t._v(" "),s("p",[t._v("特点：")]),t._v(" "),s("ul",[s("li",[t._v("vuex 的存储是响应式的，数据改变时页面便会更新")]),t._v(" "),s("li",[t._v("改变数据的唯一方式是 mutation，这使得状态的改变便于跟踪")])]),t._v(" "),s("p",[t._v("使用：")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Vue "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Vuex "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vuex"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nVue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Vuex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" store "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vuex"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Store")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  store"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br")])]),s("h2",{attrs:{id:"模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#模块"}},[t._v("#")]),t._v(" 模块")]),t._v(" "),s("p",[t._v("modules 属性可以将 store 拆分成多个部分，每个 module 内的写法和 store 是相同的。")]),t._v(" "),s("h3",{attrs:{id:"命名空间"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命名空间"}},[t._v("#")]),t._v(" 命名空间")]),t._v(" "),s("p",[t._v("不使用命名空间时，可以直接通过：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("this.$store.state.模块名")]),t._v("访问某个 module 里的"),s("code",[t._v("state")])]),t._v(" "),s("li",[s("code",[t._v("this.$store.getters.模块名")]),t._v("访问某个 module 里的"),s("code",[t._v("getters")])])]),t._v(" "),s("p",[t._v("在 module 中用"),s("code",[t._v("namespace:true")]),t._v("可以开启命名空间。")]),t._v(" "),s("ul",[s("li",[t._v("多个模块可以对同一"),s("code",[t._v("mutation")]),t._v("做出反应")]),t._v(" "),s("li",[t._v("当多个模块的"),s("code",[t._v("getters")]),t._v("、"),s("code",[t._v("actions")]),t._v("重名时会发生冲突")])]),t._v(" "),s("h3",{attrs:{id:"创建基于某个命名空间的绑定函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#创建基于某个命名空间的绑定函数"}},[t._v("#")]),t._v(" 创建基于某个命名空间的绑定函数")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createNamespacedHelpers "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vuex"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mapState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" mapActions "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createNamespacedHelpers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"some/nested/module"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h2",{attrs:{id:"为什么需要有-action-而不是在-mutation-中执行异步请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么需要有-action-而不是在-mutation-中执行异步请求"}},[t._v("#")]),t._v(" 为什么需要有 action 而不是在 mutation 中执行异步请求")]),t._v(" "),s("p",[t._v("对于每一条 mutation，devtool 都会捕捉其执行前后的状态进行对照。")]),t._v(" "),s("p",[t._v("如果 mutation 中存在异步请求则无法做到这一点。因为"),s("strong",[t._v("在回调函数中进行的状态改变是不可追踪的")])]),t._v(" "),s("h2",{attrs:{id:"vuex-的注入方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vuex-的注入方式"}},[t._v("#")]),t._v(" Vuex 的注入方式")]),t._v(" "),s("ol",[s("li",[t._v("Vuex 作为一个 Vue 插件，使用 Vue.use(Vuex)进行注册。该过程会执行 install 方法")]),t._v(" "),s("li",[t._v("通过 mixin 向每个节点注入 "),s("code",[t._v("$store")])]),t._v(" "),s("li",[t._v("对于根节点，直接将 "),s("code",[t._v("option.store")]),t._v(" 赋值给 "),s("code",[t._v("this.$store")]),t._v("。若组件的 option 不存在 store 属性则说明不是根节点，则使用父节点的 "),s("code",[t._v("$store")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);