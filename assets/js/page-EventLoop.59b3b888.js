(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{582:function(t,s,a){"use strict";a.r(s);var r=a(1),e=Object(r.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"eventloop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#eventloop"}},[t._v("#")]),t._v(" EventLoop")]),t._v(" "),s("h2",{attrs:{id:"单线程与异步"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单线程与异步"}},[t._v("#")]),t._v(" 单线程与异步")]),t._v(" "),s("h3",{attrs:{id:"js为什么是单线程的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js为什么是单线程的"}},[t._v("#")]),t._v(" JS为什么是单线程的")]),t._v(" "),s("p",[t._v("与用户的互动和操作DOM决定了JS只能用单线程。如果涉及多个线程，则在执行同步问题（如操作DOM）时需要加锁，非常繁琐")]),t._v(" "),s("h3",{attrs:{id:"单线程带来的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单线程带来的问题"}},[t._v("#")]),t._v(" 单线程带来的问题")]),t._v(" "),s("p",[s("strong",[t._v("页面阻塞问题")]),t._v("。即进行需要大量耗时的任务时，页面的渲染会卡死，页面无响应，影响用户体验")]),t._v(" "),s("h3",{attrs:{id:"js中有哪些操作是异步的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#js中有哪些操作是异步的"}},[t._v("#")]),t._v(" JS中有哪些操作是异步的")]),t._v(" "),s("ul",[s("li",[t._v("事件监听等各类回调函数")]),t._v(" "),s("li",[t._v("定时器操作")]),t._v(" "),s("li",[t._v("AJAX数据请求")]),t._v(" "),s("li",[t._v("Promise、async/await")])]),t._v(" "),s("h3",{attrs:{id:"为什么回调函数不能用try-catch捕获异常"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么回调函数不能用try-catch捕获异常"}},[t._v("#")]),t._v(" 为什么回调函数不能用try，catch捕获异常")]),t._v(" "),s("p",[t._v("捕获异常的函数在执行栈内，回调函数在任务队列内。")]),t._v(" "),s("p",[t._v("当回调函数加入执行栈执行的时候，捕获异常的函数已经从栈内退出了。所以异常无法捕获")]),t._v(" "),s("h2",{attrs:{id:"event-loop"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#event-loop"}},[t._v("#")]),t._v(" Event Loop")]),t._v(" "),s("p",[t._v("主线程从任务队列读取事件，这个过程是不断循环的，所以称为事件循环。")]),t._v(" "),s("p",[t._v("事件任务分为两类："),s("strong",[t._v("宏任务")]),t._v("、"),s("strong",[t._v("微任务")]),t._v("。")]),t._v(" "),s("p",[t._v("事件循环的运行机制：")]),t._v(" "),s("ul",[s("li",[t._v("整个脚本作为一个宏任务首先执行")]),t._v(" "),s("li",[t._v("执行过程中：\n"),s("ul",[s("li",[t._v("同步代码直接执行")]),t._v(" "),s("li",[t._v("宏任务就加入宏任务队列")]),t._v(" "),s("li",[t._v("微任务就加入微任务队列")])])]),t._v(" "),s("li",[t._v("当前宏任务执行完毕，执行微任务队列的所有任务。")]),t._v(" "),s("li",[t._v("从宏任务队列中取出下一个执行，重复上述过程。")])]),t._v(" "),s("h3",{attrs:{id:"宏任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#宏任务"}},[t._v("#")]),t._v(" 宏任务")]),t._v(" "),s("ul",[s("li",[t._v("整体的script标签里的代码")]),t._v(" "),s("li",[t._v("setTimeout / setInterval")]),t._v(" "),s("li",[t._v("IO操作")]),t._v(" "),s("li",[t._v("ajax请求")])]),t._v(" "),s("h3",{attrs:{id:"微任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#微任务"}},[t._v("#")]),t._v(" 微任务")]),t._v(" "),s("ul",[s("li",[t._v("Promise的回调（then/reject），以及以promise为基础开发的API：fetch等")]),t._v(" "),s("li",[t._v("V8引擎的垃圾回收过程")]),t._v(" "),s("li",[t._v("MutationObserver （ 用来监测DOM树的变化 ）")])]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" observerOptions "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("childList")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 观察目标子节点的变化，是否有添加或者删除")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("attributes")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 观察属性变动")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("subtree")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("     "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 观察后代节点，默认为 false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" oberver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MutationObserver")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\noberver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("observe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getElementById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'container'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" observerOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);