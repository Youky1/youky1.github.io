(window.webpackJsonp=window.webpackJsonp||[]).push([[100],{683:function(s,a,t){"use strict";t.r(a);var e=t(1),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"常见网络攻击方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见网络攻击方式"}},[s._v("#")]),s._v(" 常见网络攻击方式")]),s._v(" "),a("h2",{attrs:{id:"sql-注入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sql-注入"}},[s._v("#")]),s._v(" SQL 注入")]),s._v(" "),a("p",[s._v("通过在 SQL 查询的内容中构造 SQL 语句，如对于")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("http://domain.com/?user=1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("通过 URL 可知这是一个 GET 请求，用到了 user 参数。实际的 SQL 查询"),a("em",[s._v("可能")]),s._v("是：")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" users "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" user_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果把请求连接换为：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("http://domain.com/?user=1' order by 1#\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("则执行的 SQL 变成了：")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" users "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" user_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("order")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("by")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("由于#后面的内容会作为注释，所以语法上是正确的，此时便完成了一次 SQL 注入。返回的结果会按 user_id 第一字段排行。")]),s._v(" "),a("p",[s._v("若继续更改 order by 后面的数字，再 4 的时候出错了，则说明该表中一共有三个字段，达到了猜测数据库内容的目的。")]),s._v(" "),a("p",[s._v("此外，还可以使用联合查询，直接查出表内的内容，如")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("http://domain.com/?user=1' union select database(),user()#\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("对应的 SQL 为：")]),s._v(" "),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" users "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" user_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("union")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("database")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("将会返回数据库的名字和用户名")]),s._v(" "),a("h3",{attrs:{id:"防范措施"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#防范措施"}},[s._v("#")]),s._v(" 防范措施")]),s._v(" "),a("p",[s._v("SQL 预编译：")]),s._v(" "),a("ul",[a("li",[s._v("在服务器启动时，就将 SQL 语句的模板发送给 MySQL 服务器，并对模板进行编译，对于数据采用占位符")]),s._v(" "),a("li",[s._v("请求到来时，传送相应的参数，直接进行执行。避免了用户输入的数据成为查询逻辑的一部分")])]),s._v(" "),a("h2",{attrs:{id:"csrf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#csrf"}},[s._v("#")]),s._v(" CSRF")]),s._v(" "),a("blockquote",[a("p",[s._v("Cross-site request forgery 跨站请求伪造")])]),s._v(" "),a("p",[s._v("CSRF 攻击是指：黑客诱导用户点击链接，打开黑客的网站，然后黑客利用用户目前的登录状态发起跨站请求。")]),s._v(" "),a("p",[s._v("在进入黑客的网站 B 后，对已登录的网站 A 发起请求，并会附带上对于网站 A 的"),a("strong",[s._v("cookie")]),s._v("，来模拟用户的登录状态。")]),s._v(" "),a("h3",{attrs:{id:"防范措施-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#防范措施-2"}},[s._v("#")]),s._v(" 防范措施")]),s._v(" "),a("h4",{attrs:{id:"设置-cookie-的-samesite-属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置-cookie-的-samesite-属性"}},[s._v("#")]),s._v(" 设置 Cookie 的 SameSite 属性")]),s._v(" "),a("p",[s._v("SameSite 字段的取值有三种：")]),s._v(" "),a("ol",[a("li",[s._v("Strict：只有在当前域名下的请求才能携带 Cookie")]),s._v(" "),a("li",[s._v("Lax：只能在 get 方法提交表单或 a 标签发送 get 请求时允许携带 Cookie")]),s._v(" "),a("li",[s._v("None：默认值，在任何情况都自动携带 Cookie")])]),s._v(" "),a("h4",{attrs:{id:"验证来源站点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证来源站点"}},[s._v("#")]),s._v(" 验证来源站点")]),s._v(" "),a("p",[s._v("根据请求头中的 origin 和 refer 验证请求来源。")]),s._v(" "),a("p",[s._v("但由于这两个字段可以伪造，所以有效性不高")]),s._v(" "),a("h4",{attrs:{id:"csrf-token"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#csrf-token"}},[s._v("#")]),s._v(" CSRF Token")]),s._v(" "),a("p",[s._v("后端返回的页面中，附带一个 token 字符串，浏览器再次发送请求时，必须携带这个 token 才有效。")]),s._v(" "),a("p",[s._v("因为第三方站点一般无法获得这个 token，因此会被服务器拒绝。")]),s._v(" "),a("h2",{attrs:{id:"xss"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xss"}},[s._v("#")]),s._v(" XSS")]),s._v(" "),a("blockquote",[a("p",[s._v("Cross Site Scripting 跨站脚本，为了和 css 区分，叫它 xss")])]),s._v(" "),a("p",[s._v("XSS 攻击是指浏览器中执行的恶意脚本，从而拿到用户信息并进行操作")]),s._v(" "),a("p",[s._v("可能造成的影响：")]),s._v(" "),a("ul",[a("li",[s._v("读取 cookie")]),s._v(" "),a("li",[s._v("监听用户行为，如用户输入的账号密码")]),s._v(" "),a("li",[s._v("修改 DOM 伪造登录表单")]),s._v(" "),a("li",[s._v("在页面中生成悬浮广告")])]),s._v(" "),a("p",[s._v("XSS 攻击有三种实现方式：存储型、反射型、文档型")]),s._v(" "),a("h3",{attrs:{id:"存储型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#存储型"}},[s._v("#")]),s._v(" 存储型")]),s._v(" "),a("p",[s._v("将脚本存储到了后端数据库，在页面渲染时直接执行。")]),s._v(" "),a("p",[s._v("常见场景：用户提交了一段 JS 而前后端没有做转义。")]),s._v(" "),a("h3",{attrs:{id:"反射型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#反射型"}},[s._v("#")]),s._v(" 反射型")]),s._v(" "),a("p",[s._v("将恶意代码作为请求的一部分，如")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('http://domain.com?name=<script>alert("1")<\/script>\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("后端获得了 name 参数，然后将内容返回给浏览器，这部分内容就作为 HTML 的一部分解析，也就是进行了执行")]),s._v(" "),a("h3",{attrs:{id:"文档型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文档型"}},[s._v("#")]),s._v(" 文档型")]),s._v(" "),a("p",[s._v("不攻击服务端，而是在数据传输过程中进行劫持，直接修改 HTML 文档")]),s._v(" "),a("h3",{attrs:{id:"防范措施-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#防范措施-3"}},[s._v("#")]),s._v(" 防范措施")]),s._v(" "),a("ul",[a("li",[s._v("对用户输入内容进行转义")]),s._v(" "),a("li",[s._v("设置"),a("code",[s._v("Cookie")]),s._v("的"),a("code",[s._v("HttpOnly")]),s._v("属性")]),s._v(" "),a("li",[s._v("浏览器的内容安全策略")])]),s._v(" "),a("h2",{attrs:{id:"ddos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ddos"}},[s._v("#")]),s._v(" DDoS")]),s._v(" "),a("blockquote",[a("p",[s._v("分布式拒绝服务攻击")])]),s._v(" "),a("p",[s._v("定义：在短时间内向服务器发送大量请求，耗尽服务器的资源，使正常的请求无法得到响应，造成网站瘫痪。")]),s._v(" "),a("h3",{attrs:{id:"防范措施-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#防范措施-4"}},[s._v("#")]),s._v(" 防范措施")]),s._v(" "),a("ol",[a("li",[s._v("拦截特征 IP 的请求。若攻击者的 IP 是有特征的，对其进行拦截即可")]),s._v(" "),a("li",[s._v("带宽扩容。容纳包括攻击请求的所有请求，则攻击自然无效")]),s._v(" "),a("li",[s._v("部署 CDN。将静态内容部署到 CDN，用户会访问 CDN 中的缓存，而不是直接向源服务器发送请求")])]),s._v(" "),a("h2",{attrs:{id:"syn-泛洪攻击"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#syn-泛洪攻击"}},[s._v("#")]),s._v(" SYN 泛洪攻击")]),s._v(" "),a("p",[s._v("属于 DDoS 攻击的一种，通过向服务器放大量的 SYN 报文，使服务器打开大量的半连接，分配 TCB（Transmission Control Block 传输控制块），从而消耗资源，致使正常的链接请求无法被响应")]),s._v(" "),a("h3",{attrs:{id:"防范措施-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#防范措施-5"}},[s._v("#")]),s._v(" 防范措施")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("无效连接的监控释放")]),s._v("：系统监视半开连接和不活动连接，达到一定阈值后进行释放。正常请求也可能受影响")]),s._v(" "),a("li",[a("strong",[s._v("延缓 TCB 分配（SYN Cookie）")]),s._v("：改变 TCB 的分配时间，初次收到 SYN 报文后，计算出一个 Cookie 值但不存储。当正式建立连接时才根据这个值校验后进行 TCB 的分配。")])]),s._v(" "),a("h2",{attrs:{id:"中间人攻击"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#中间人攻击"}},[s._v("#")]),s._v(" 中间人攻击")]),s._v(" "),a("blockquote",[a("p",[s._v("Man-in-the-Middle Attack")])]),s._v(" "),a("p",[s._v("攻击者和通信双方分别建立独立的联系，通信双方无法意识到两方的通信被人控制。")]),s._v(" "),a("h3",{attrs:{id:"防范措施-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#防范措施-6"}},[s._v("#")]),s._v(" 防范措施")]),s._v(" "),a("p",[s._v("使用特殊的身份认证方法（如 HTTPS 中的 SSL）")])])}),[],!1,null,null,null);a.default=r.exports}}]);