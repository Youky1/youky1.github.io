(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{620:function(v,_,t){"use strict";t.r(_);var r=t(1),s=Object(r.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"虚拟dom和diff算法"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#虚拟dom和diff算法"}},[v._v("#")]),v._v(" 虚拟DOM和diff算法")]),v._v(" "),_("h2",{attrs:{id:"虚拟dom"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#虚拟dom"}},[v._v("#")]),v._v(" 虚拟DOM")]),v._v(" "),_("p",[v._v("虚拟DOM的原理主要包含三部分：")]),v._v(" "),_("ol",[_("li",[v._v("用js对象"),_("strong",[v._v("模拟真实DOM")])]),v._v(" "),_("li",[_("strong",[v._v("diff算法")]),v._v("：比较两个虚拟DOM树的差异")]),v._v(" "),_("li",[_("strong",[v._v("patch算法")]),v._v("：将虚拟DOM间的差异更新到真实的DOM中")])]),v._v(" "),_("h2",{attrs:{id:"虚拟dom的作用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#虚拟dom的作用"}},[v._v("#")]),v._v(" 虚拟DOM的作用")]),v._v(" "),_("ul",[_("li",[v._v("用JS模拟DOM，避免频繁操作DOM带来的性能损耗，效率更高")]),v._v(" "),_("li",[v._v("可以实现跨平台")])]),v._v(" "),_("h2",{attrs:{id:"diff算法的思路"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#diff算法的思路"}},[v._v("#")]),v._v(" Diff算法的思路")]),v._v(" "),_("p",[v._v("触发流程：")]),v._v(" "),_("ol",[_("li",[v._v("数据改变触发setter")]),v._v(" "),_("li",[v._v("调用Dep.notify通知收集的所有Watcher")]),v._v(" "),_("li",[v._v("调用Watcher.update进行视图更新")])]),v._v(" "),_("p",[v._v("整体思想：")]),v._v(" "),_("ul",[_("li",[v._v("深度优先，同级比较")]),v._v(" "),_("li",[v._v("若父节点不相同，直接替换")]),v._v(" "),_("li",[v._v("若父节点相同，遍历子节点\n"),_("ul",[_("li",[v._v("若两个节点是文本节点，则"),_("strong",[v._v("比较文本内容")])]),v._v(" "),_("li",[v._v("若旧节点有子节点，新节点没有，则"),_("strong",[v._v("删除所有子节点")])]),v._v(" "),_("li",[v._v("若旧节点没有子节点，新节点有，则"),_("strong",[v._v("插入所有子节点")])]),v._v(" "),_("li",[v._v("若二者都有子节点，"),_("strong",[v._v("遍历子节点进行比较")])])])])]),v._v(" "),_("p",[v._v("在遍历子节点时：")]),v._v(" "),_("ul",[_("li",[v._v("首先对于新旧序列的首尾节点分别进行四次比较")]),v._v(" "),_("li",[v._v("若四次比较都不匹配，则对新序列中的节点，在所有旧节点中遍历比较")])]),v._v(" "),_("h2",{attrs:{id:"使用v-for时key的作用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用v-for时key的作用"}},[v._v("#")]),v._v(" 使用v-for时key的作用")]),v._v(" "),_("p",[v._v("key是vue中VNode的唯一标记。有了key，diff操作可以更加"),_("strong",[v._v("准确")]),v._v("和"),_("strong",[v._v("迅速")]),v._v("：")]),v._v(" "),_("ul",[_("li",[v._v("准确：带key的列表节点发生移动、新增和删除时，可以避免重新渲染整个列表的情况，提高匹配的准确度")]),v._v(" "),_("li",[v._v("迅速：利用key的唯一性，可以生成map来获取节点，比遍历方式更快")])])])}),[],!1,null,null,null);_.default=s.exports}}]);