(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{670:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"http2-相比于之前版本有哪些提高"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http2-相比于之前版本有哪些提高"}},[t._v("#")]),t._v(" HTTP2 相比于之前版本有哪些提高")]),t._v(" "),s("h2",{attrs:{id:"头部压缩"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#头部压缩"}},[t._v("#")]),t._v(" 头部压缩")]),t._v(" "),s("p",[t._v("对于请求体的压缩，可以通过"),s("code",[t._v("Content-Encoding")]),t._v("来指明。")]),t._v(" "),s("p",[t._v("而当请求十分复杂时（尤其是对于 GET 请求，几乎都是请求头），对于请求头本身的压缩也十分有必要。")]),t._v(" "),s("p",[t._v("因此，HTTP2 针对头部字段，采用了"),s("code",[t._v("HPACK")]),t._v("压缩算法：")]),t._v(" "),s("ul",[s("li",[t._v("在服务器和客户端之间建立哈希表，对于已经使用过的字段，后续将索引传递给对方即可。")]),t._v(" "),s("li",[t._v("对整数和字符串进行哈夫曼压缩")])]),t._v(" "),s("h2",{attrs:{id:"二进制分帧-多路复用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二进制分帧-多路复用"}},[t._v("#")]),t._v(" 二进制分帧 & 多路复用")]),t._v(" "),s("p",[t._v("HTTP2 的多路复用，从协议层面解决了 HTTP 的队头阻塞问题。")]),t._v(" "),s("blockquote",[s("p",[t._v("队头阻塞：前面的报文没有收到回复时，阻塞后续所有报文的回复")])]),t._v(" "),s("p",[t._v("采用的方法是"),s("strong",[t._v("二进制分帧")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("将报文全部转成二进制的 01 串，因此报文被分成了一个个二进制的帧")]),t._v(" "),s("li",[t._v("在一个 TCP 连接上，可以进行多个数据帧的通信")]),t._v(" "),s("li",[t._v("多个帧之间是无序的，但对于一个报文来说，它的不同帧是按序的")])]),t._v(" "),s("h2",{attrs:{id:"服务器推送"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务器推送"}},[t._v("#")]),t._v(" 服务器推送")]),t._v(" "),s("p",[t._v("服务器除了响应客户端请求外，还可以主动发送内容。如请求了 HTML 文件后，服务器主动发送里面引用的 css 文件和图片等。如 NGINX 的配置：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("location / {\n  root   /usr/share/nginx/html;\n  index  index.html index.htm;\n  http2_push /style.css;\n  http2_push /example.png;\n}\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);