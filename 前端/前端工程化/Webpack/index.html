<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <link rel="preload" href="/assets/css/0.styles.b533bfa1.css" as="style"><link rel="preload" href="/assets/js/app.300783a1.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.ffcec671.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.61e71969.js" as="script"><link rel="preload" href="/assets/js/page-webpack.c86daeff.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout.ec610c62.js" as="script"><link rel="prefetch" href="/assets/js/131.a6f96b35.js"><link rel="prefetch" href="/assets/js/132.31e884be.js"><link rel="prefetch" href="/assets/js/133.bb438d3d.js"><link rel="prefetch" href="/assets/js/layout-Blog.2b88b015.js"><link rel="prefetch" href="/assets/js/layout-Layout.468e5214.js"><link rel="prefetch" href="/assets/js/layout-NotFound.7e9c4145.js"><link rel="prefetch" href="/assets/js/layout-Slide.2e42d835.js"><link rel="prefetch" href="/assets/js/page--026cfd4c.59e2b899.js"><link rel="prefetch" href="/assets/js/page--8016680c.83786bb0.js"><link rel="prefetch" href="/assets/js/page-AOP架构.26a1914d.js"><link rel="prefetch" href="/assets/js/page-BFC.d5428ab7.js"><link rel="prefetch" href="/assets/js/page-CommonJS与ESModule.dd7a67d9.js"><link rel="prefetch" href="/assets/js/page-Cookie、Session、Token.dc50206c.js"><link rel="prefetch" href="/assets/js/page-DNS协议.b68df392.js"><link rel="prefetch" href="/assets/js/page-Diff算法.54a3e291.js"><link rel="prefetch" href="/assets/js/page-ES6有哪些新特性.57318cfc.js"><link rel="prefetch" href="/assets/js/page-EventLoop.59b3b888.js"><link rel="prefetch" href="/assets/js/page-Fiber架构.b57115de.js"><link rel="prefetch" href="/assets/js/page-H5资源加载优化分析.88284a5f.js"><link rel="prefetch" href="/assets/js/page-HTTP2相比于之前版本有哪些提高.a5f33350.js"><link rel="prefetch" href="/assets/js/page-HTTPS的流程.7f72ee6e.js"><link rel="prefetch" href="/assets/js/page-HTTP协议的特点.5a080e31.js"><link rel="prefetch" href="/assets/js/page-HTTP常见状态码.19482787.js"><link rel="prefetch" href="/assets/js/page-HTTP常见请求方法.ba2580b2.js"><link rel="prefetch" href="/assets/js/page-HTTP报文格式.a8976652.js"><link rel="prefetch" href="/assets/js/page-HTTP缓存机制.4b681081.js"><link rel="prefetch" href="/assets/js/page-HomePage.d1e6c9af.js"><link rel="prefetch" href="/assets/js/page-Http接口传输数据的五种方式.6a4569f9.js"><link rel="prefetch" href="/assets/js/page-Koa中间件的原理.c51fff7f.js"><link rel="prefetch" href="/assets/js/page-MVC、MVP、MVVM分别是什么.2cc00f09.js"><link rel="prefetch" href="/assets/js/page-Middleware.275b177e.js"><link rel="prefetch" href="/assets/js/page-NestCli.a5999b0f.js"><link rel="prefetch" href="/assets/js/page-Promise.32728f82.js"><link rel="prefetch" href="/assets/js/page-React.7a18c5e4.js"><link rel="prefetch" href="/assets/js/page-React理念.a0f4c8a5.js"><link rel="prefetch" href="/assets/js/page-Redux.75dde66a.js"><link rel="prefetch" href="/assets/js/page-Render阶段.29f7ddcb.js"><link rel="prefetch" href="/assets/js/page-Rxjs和Interceptor.045a1059.js"><link rel="prefetch" href="/assets/js/page-SSR.4ccfe04f.js"><link rel="prefetch" href="/assets/js/page-SSR原理与实践.74b01f49.js"><link rel="prefetch" href="/assets/js/page-TCP三握手与四次挥手.c4280e29.js"><link rel="prefetch" href="/assets/js/page-TCP与UDP的区别.fd305d42.js"><link rel="prefetch" href="/assets/js/page-TCP报文的时间戳.9d3635d8.js"><link rel="prefetch" href="/assets/js/page-Template模板编译为真实DOM的过程.ab341c52.js"><link rel="prefetch" href="/assets/js/page-TypeScript.24d708e7.js"><link rel="prefetch" href="/assets/js/page-URI和URL的区别.39186d0b.js"><link rel="prefetch" href="/assets/js/page-V8引擎中一段JS代码的执行流程.839d18d4.js"><link rel="prefetch" href="/assets/js/page-VUE生命周期.5c9985eb.js"><link rel="prefetch" href="/assets/js/page-Vite相关问题.3f6bb87b.js"><link rel="prefetch" href="/assets/js/page-Vue-Router.1806e81c.js"><link rel="prefetch" href="/assets/js/page-Vue-class-component.9edd70b4.js"><link rel="prefetch" href="/assets/js/page-Vue3.2522ae20.js"><link rel="prefetch" href="/assets/js/page-VueObservable.eb352fd5.js"><link rel="prefetch" href="/assets/js/page-VuePress实战.e5bae430.js"><link rel="prefetch" href="/assets/js/page-Vuex.1ccf9ea0.js"><link rel="prefetch" href="/assets/js/page-Vue中的修饰符.f927bf3b.js"><link rel="prefetch" href="/assets/js/page-Vue中的自定义指令.7fc1265f.js"><link rel="prefetch" href="/assets/js/page-Vue和React的区别.0ecd6958.js"><link rel="prefetch" href="/assets/js/page-Vue实现数据响应式的原理.905b0fb0.js"><link rel="prefetch" href="/assets/js/page-WebWorker的使用.f2e164f3.js"><link rel="prefetch" href="/assets/js/page-commit阶段.cc7e4679.js"><link rel="prefetch" href="/assets/js/page-dataMethods作用域问题.d51bf798.js"><link rel="prefetch" href="/assets/js/page-opacity0、visibilityhidden、displaynone的区别.88da48c3.js"><link rel="prefetch" href="/assets/js/page-schedule阶段.7c65e163.js"><link rel="prefetch" href="/assets/js/page-script标签的属性.14dab8aa.js"><link rel="prefetch" href="/assets/js/page-type和interface的异同点.56e36316.js"><link rel="prefetch" href="/assets/js/page-watch和computed的区别.1e89fd00.js"><link rel="prefetch" href="/assets/js/page-will-change.626affb0.js"><link rel="prefetch" href="/assets/js/page-一、基本使用.8a266942.js"><link rel="prefetch" href="/assets/js/page-一、起步.37bd5db6.js"><link rel="prefetch" href="/assets/js/page-不同Tab页间的通信.72929a0c.js"><link rel="prefetch" href="/assets/js/page-事件模型.85457357.js"><link rel="prefetch" href="/assets/js/page-从Immutablejs到Redux，起底函数式编程.658e2abd.js"><link rel="prefetch" href="/assets/js/page-从输入URL到页面显示，经历了哪些过程.9f0ce038.js"><link rel="prefetch" href="/assets/js/page-伪类、伪元素.9855e347.js"><link rel="prefetch" href="/assets/js/page-使用Vite从零搭建React项目.1c875443.js"><link rel="prefetch" href="/assets/js/page-修饰器.f2607251.js"><link rel="prefetch" href="/assets/js/page-全局模块和生命周期.64122aa6.js"><link rel="prefetch" href="/assets/js/page-创建版本库.ad3a72a8.js"><link rel="prefetch" href="/assets/js/page-判断元素是否在可视区域内.1fb9304c.js"><link rel="prefetch" href="/assets/js/page-前端数据持久化存储方案.1c7d168d.js"><link rel="prefetch" href="/assets/js/page-前言.9e318bae.js"><link rel="prefetch" href="/assets/js/page-动态Module.6455b220.js"><link rel="prefetch" href="/assets/js/page-动画效果卡顿的解决方案.4f171633.js"><link rel="prefetch" href="/assets/js/page-单位问题.bdee5ade.js"><link rel="prefetch" href="/assets/js/page-原型、继承等相关问题.e73ce111.js"><link rel="prefetch" href="/assets/js/page-各类手写问题汇总.c0ed089b.js"><link rel="prefetch" href="/assets/js/page-垃圾回收问题.5a173351.js"><link rel="prefetch" href="/assets/js/page-基本语法.862406e7.js"><link rel="prefetch" href="/assets/js/page-基础用法.bf003be9.js"><link rel="prefetch" href="/assets/js/page-如何判断页面的性能瓶颈.0520de77.js"><link rel="prefetch" href="/assets/js/page-如何理解Node的单线程.a7948c36.js"><link rel="prefetch" href="/assets/js/page-如何用一键下载B站视频.d3916034.js"><link rel="prefetch" href="/assets/js/page-如何进行权限控制.2610432a.js"><link rel="prefetch" href="/assets/js/page-对于SPA的理解.70c3898e.js"><link rel="prefetch" href="/assets/js/page-对于keep-alive的理解.bf7612ed.js"><link rel="prefetch" href="/assets/js/page-对于前端工程化的理解.c360bb38.js"><link rel="prefetch" href="/assets/js/page-常见HTTP首部字段.4276d18e.js"><link rel="prefetch" href="/assets/js/page-常见网络攻击方式.f35b3b26.js"><link rel="prefetch" href="/assets/js/page-微信小程序底层框架实现原理.b358c303.js"><link rel="prefetch" href="/assets/js/page-微前端.d380c5c4.js"><link rel="prefetch" href="/assets/js/page-控制反转（IOC）与依赖注入（DI）.7956f184.js"><link rel="prefetch" href="/assets/js/page-收藏夹.a5b6d34a.js"><link rel="prefetch" href="/assets/js/page-数据传输相关问题.513c31bf.js"><link rel="prefetch" href="/assets/js/page-数据类型相关问题.f4a41bb2.js"><link rel="prefetch" href="/assets/js/page-最常用的4种居中方法.f71ad05a.js"><link rel="prefetch" href="/assets/js/page-有哪些常见的优化方法.13a638bd.js"><link rel="prefetch" href="/assets/js/page-模块.6439ce2f.js"><link rel="prefetch" href="/assets/js/page-正则表达式.79c39fc4.js"><link rel="prefetch" href="/assets/js/page-注入Provider的多种方式.2d9613f5.js"><link rel="prefetch" href="/assets/js/page-浏览器的多线程.fc94cd5e.js"><link rel="prefetch" href="/assets/js/page-用nodejs实现一个命令行可视化库.37772254.js"><link rel="prefetch" href="/assets/js/page-疑难杂症.3d9589b5.js"><link rel="prefetch" href="/assets/js/page-盒子模型.c0411068.js"><link rel="prefetch" href="/assets/js/page-组件间通信方式有哪些.8c1c5e45.js"><link rel="prefetch" href="/assets/js/page-网络请求方式总结.956db07b.js"><link rel="prefetch" href="/assets/js/page-自适应布局问题.530c6ccf.js"><link rel="prefetch" href="/assets/js/page-虚拟DOM和diff算法.4ebca01c.js"><link rel="prefetch" href="/assets/js/page-虚拟内存.987cdb98.js"><link rel="prefetch" href="/assets/js/page-请求方法.392ba837.js"><link rel="prefetch" href="/assets/js/page-跨域问题.ac2f511d.js"><link rel="prefetch" href="/assets/js/page-进程和线程.1778414a.js"><link rel="prefetch" href="/assets/js/page-重绘、重排、合成.32b56a0e.js"><link rel="prefetch" href="/assets/js/page-针对移动端应用的优化建议.dd508495.js"><link rel="prefetch" href="/assets/js/page-错误捕获.41fc683d.js"><link rel="prefetch" href="/assets/js/page-闭包问题.26a92ec8.js"><link rel="prefetch" href="/assets/js/page-防抖和节流.78327a8e.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.0668bebe.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b533bfa1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-sidebar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><img src="/author.jpg" alt="" class="logo"> <!----> <!----></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/category/前端/" class="nav-link"><!---->
  前端
</a></div><div class="nav-item"><a href="/category/后端/" class="nav-link"><!---->
  后端
</a></div><div class="nav-item"><a href="/category/计算机网络/" class="nav-link"><!---->
  计算机网络
</a></div><div class="nav-item"><a href="/category/浏览器/" class="nav-link"><!---->
  浏览器
</a></div><div class="nav-item"><a href="/category/操作系统/" class="nav-link"><!---->
  操作系统
</a></div><div class="nav-item"><a href="/category/其他/" class="nav-link"><!---->
  其他
</a></div><div class="nav-item"><a href="https://github.com/Youky1/Youky1.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div></nav> <!----> <!----> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!----> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/category/前端/" class="nav-link"><!---->
  前端
</a></div><div class="nav-item"><a href="/category/后端/" class="nav-link"><!---->
  后端
</a></div><div class="nav-item"><a href="/category/计算机网络/" class="nav-link"><!---->
  计算机网络
</a></div><div class="nav-item"><a href="/category/浏览器/" class="nav-link"><!---->
  浏览器
</a></div><div class="nav-item"><a href="/category/操作系统/" class="nav-link"><!---->
  操作系统
</a></div><div class="nav-item"><a href="/category/其他/" class="nav-link"><!---->
  其他
</a></div><div class="nav-item"><a href="https://github.com/Youky1/Youky1.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><!---->
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <!----> <div class="content__sidebar-center"></div> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">JS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">TS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">Vue3</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable open"><!----> <span class="title">前端工程化</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/CommonJS%E5%92%8CESModule%E7%9A%84%E5%8C%BA%E5%88%AB/" class="sidebar-link">CommonJS 与 ES Module</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/CommonJS%E5%92%8CESModule%E7%9A%84%E5%8C%BA%E5%88%AB/#模块化方案要解决的问题" class="sidebar-link">模块化方案要解决的问题</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/CommonJS%E5%92%8CESModule%E7%9A%84%E5%8C%BA%E5%88%AB/#commonjs" class="sidebar-link">CommonJS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/CommonJS%E5%92%8CESModule%E7%9A%84%E5%8C%BA%E5%88%AB/#导出" class="sidebar-link heading3">导出</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/CommonJS%E5%92%8CESModule%E7%9A%84%E5%8C%BA%E5%88%AB/#导入" class="sidebar-link heading3">导入</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/CommonJS%E5%92%8CESModule%E7%9A%84%E5%8C%BA%E5%88%AB/#缓存机制" class="sidebar-link heading3">缓存机制</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/CommonJS%E5%92%8CESModule%E7%9A%84%E5%8C%BA%E5%88%AB/#es-module" class="sidebar-link">ES Module</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/CommonJS%E5%92%8CESModule%E7%9A%84%E5%8C%BA%E5%88%AB/#导出-2" class="sidebar-link heading3">导出</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/CommonJS%E5%92%8CESModule%E7%9A%84%E5%8C%BA%E5%88%AB/#导入-2" class="sidebar-link heading3">导入</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/CommonJS%E5%92%8CESModule%E7%9A%84%E5%8C%BA%E5%88%AB/#二者区别" class="sidebar-link">二者区别</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/CommonJS%E5%92%8CESModule%E7%9A%84%E5%8C%BA%E5%88%AB/#为什么开发中两种方式可以混用" class="sidebar-link">为什么开发中两种方式可以混用</a></li></ul></li><li><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/" class="sidebar-link">SSR 原理与实践</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#背景" class="sidebar-link">背景</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#前端渲染方式的发展历程" class="sidebar-link heading3">前端渲染方式的发展历程</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#各阶段的优缺点对比" class="sidebar-link heading3">各阶段的优缺点对比</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#为什么需要同构-ssr" class="sidebar-link heading3">为什么需要同构 SSR</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#实现原理" class="sidebar-link">实现原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#将-react-组件转换为-html-字符串" class="sidebar-link heading3">将 React 组件转换为 HTML 字符串</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#流式渲染" class="sidebar-link heading3">流式渲染</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#路由同构" class="sidebar-link">路由同构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#路由定义" class="sidebar-link heading3">路由定义</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#后端部分" class="sidebar-link heading3">后端部分</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#前端部分" class="sidebar-link heading3">前端部分</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#数据同构" class="sidebar-link">数据同构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#后端实现" class="sidebar-link heading3">后端实现</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#前端实现" class="sidebar-link heading3">前端实现</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#数据脱水" class="sidebar-link heading3">数据脱水</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#数据注水" class="sidebar-link heading3">数据注水</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/SSR/#完善-tdk-信息" class="sidebar-link heading3">完善 TDK 信息</a></li></ul></li></ul></li><li><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Vite%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/" class="sidebar-link">Vite 相关问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Vite%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/#vite-的流程和-webpack-的区别" class="sidebar-link">Vite 的流程和 Webpack 的区别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Vite%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/#webpack" class="sidebar-link heading3">Webpack</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Vite%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/#vite" class="sidebar-link heading3">Vite</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Vite%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/#和-webpack-相比-优缺点是什么" class="sidebar-link">和 Webpack 相比，优缺点是什么</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Vite%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/#为什么-esbuild-更快" class="sidebar-link">为什么 esbuild 更快？</a></li></ul></li><li><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Vue%E5%92%8CReact%E7%9A%84%E5%8C%BA%E5%88%AB/" class="sidebar-link">Vue 和 React 的区别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Vue%E5%92%8CReact%E7%9A%84%E5%8C%BA%E5%88%AB/#模板渲染的方式不同" class="sidebar-link">模板渲染的方式不同</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Vue%E5%92%8CReact%E7%9A%84%E5%8C%BA%E5%88%AB/#监听数据变化的设计思想不一样" class="sidebar-link">监听数据变化的设计思想不一样</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Vue%E5%92%8CReact%E7%9A%84%E5%8C%BA%E5%88%AB/#数据变化时的渲染过程不同" class="sidebar-link">数据变化时的渲染过程不同</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Vue%E5%92%8CReact%E7%9A%84%E5%8C%BA%E5%88%AB/#组件间通信方式的不同" class="sidebar-link">组件间通信方式的不同</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Vue%E5%92%8CReact%E7%9A%84%E5%8C%BA%E5%88%AB/#生态的不同" class="sidebar-link">生态的不同</a></li></ul></li><li><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/" aria-current="page" class="active sidebar-link">webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_0-webpack-解决了什么问题" class="sidebar-link">0. webpack 解决了什么问题</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_1-模块化的演进过程" class="sidebar-link">1. 模块化的演进过程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#第一阶段、文件划分" class="sidebar-link heading3">第一阶段、文件划分</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#第二阶段、命名空间方式" class="sidebar-link heading3">第二阶段、命名空间方式</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#第三阶段、iife" class="sidebar-link heading3">第三阶段、IIFE</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_2-核心概念" class="sidebar-link">2. 核心概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#entry" class="sidebar-link heading3">entry</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#output" class="sidebar-link heading3">output</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#mode" class="sidebar-link heading3">mode</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#loader" class="sidebar-link heading3">loader</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#plugin" class="sidebar-link heading3">plugin</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#loader-和-plugin-的区别" class="sidebar-link heading3">loader 和 plugin 的区别</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#编写-loader-和-plugin-的思路" class="sidebar-link heading3">编写 loader 和 plugin 的思路</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_3-常见文件的解析" class="sidebar-link">3. 常见文件的解析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#es6" class="sidebar-link heading3">ES6</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#样式" class="sidebar-link heading3">样式</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#图片-字体" class="sidebar-link heading3">图片 / 字体</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_4-文件监听" class="sidebar-link">4. 文件监听</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#原理" class="sidebar-link heading3">原理</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#配置" class="sidebar-link heading3">配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_5-webpack-dev-server" class="sidebar-link">5. webpack-dev-server</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#使用" class="sidebar-link heading3">使用</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#静态资源访问" class="sidebar-link heading3">静态资源访问</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#proxy-代理" class="sidebar-link heading3">Proxy 代理</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#热更新" class="sidebar-link heading3">热更新</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_6-文件指纹" class="sidebar-link">6. 文件指纹</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_7-页面公共资源的分离" class="sidebar-link">7. 页面公共资源的分离</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#基础库分离-cdn-形式引入" class="sidebar-link heading3">基础库分离（CDN 形式引入）</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#提取公共资源" class="sidebar-link heading3">提取公共资源</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_8-tree-shaking" class="sidebar-link">8. Tree Shaking</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#使用-babel-loader-后失效的问题" class="sidebar-link heading3">使用 babel-loader 后失效的问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_9-sideeffects" class="sidebar-link">9. SideEffects</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_10-sourcemap" class="sidebar-link">10. SourceMap</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#eval" class="sidebar-link heading3">eval</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#eval-source-map" class="sidebar-link heading3">eval-source-map</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#cheap-eval-source-map" class="sidebar-link heading3">cheap-eval-source-map</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#cheap-module-eval-source-map" class="sidebar-link heading3">cheap-module-eval-source-map</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#nosources-source-map" class="sidebar-link heading3">nosources-source-map</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#总结" class="sidebar-link heading3">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_11-code-splitting-分块打包" class="sidebar-link">11. Code Splitting（分块打包）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#分包的原因" class="sidebar-link heading3">分包的原因</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#多入口打包" class="sidebar-link heading3">多入口打包</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#动态导入" class="sidebar-link heading3">动态导入</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_12-scope-hoisting" class="sidebar-link">12. Scope hoisting</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#要解决的问题" class="sidebar-link heading3">要解决的问题</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#原理-2" class="sidebar-link heading3">原理</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#使用-3" class="sidebar-link heading3">使用</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_13-打包基础库" class="sidebar-link">13. 打包基础库</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_14-构建过程分析" class="sidebar-link">14. 构建过程分析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#初级分析-内置的-stats" class="sidebar-link heading3">初级分析：内置的 stats</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#速度分析-speed-measure-webpack-plugin" class="sidebar-link heading3">速度分析：speed-measure-webpack-plugin</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#体积分析-webpack-bundle-analyzer" class="sidebar-link heading3">体积分析：webpack-bundle-analyzer</a></li></ul></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_15-构建优化" class="sidebar-link">15. 构建优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#多进程并行构建-thread-loader" class="sidebar-link heading3">多进程并行构建：thread-loader</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#多进程并行压缩-terserwebpackplugin" class="sidebar-link heading3">多进程并行压缩：TerserWebpackPlugin</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#利用缓存-提升二次构建速度" class="sidebar-link heading3">利用缓存：提升二次构建速度</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#优化查找策略" class="sidebar-link heading3">优化查找策略</a></li></ul></li></ul></li><li><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E4%B9%BE%E5%9D%A4%E5%AE%9E%E7%8E%B0%E6%B2%99%E7%AE%B1%E6%9C%BA%E5%88%B6%E7%9A%84%E5%8E%9F%E7%90%86/" class="sidebar-link">微前端</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E4%B9%BE%E5%9D%A4%E5%AE%9E%E7%8E%B0%E6%B2%99%E7%AE%B1%E6%9C%BA%E5%88%B6%E7%9A%84%E5%8E%9F%E7%90%86/#微前端和iframe的优劣对比" class="sidebar-link">微前端和iframe的优劣对比</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E4%B9%BE%E5%9D%A4%E5%AE%9E%E7%8E%B0%E6%B2%99%E7%AE%B1%E6%9C%BA%E5%88%B6%E7%9A%84%E5%8E%9F%E7%90%86/#qiankun的沙箱隔离机制" class="sidebar-link">qiankun的沙箱隔离机制</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E4%B9%BE%E5%9D%A4%E5%AE%9E%E7%8E%B0%E6%B2%99%E7%AE%B1%E6%9C%BA%E5%88%B6%E7%9A%84%E5%8E%9F%E7%90%86/#样式隔离" class="sidebar-link heading3">样式隔离</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E4%B9%BE%E5%9D%A4%E5%AE%9E%E7%8E%B0%E6%B2%99%E7%AE%B1%E6%9C%BA%E5%88%B6%E7%9A%84%E5%8E%9F%E7%90%86/#js-沙箱" class="sidebar-link heading3">JS 沙箱</a></li></ul></li></ul></li><li><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E5%AF%B9%E4%BA%8E%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%9A%84%E7%90%86%E8%A7%A3/" class="sidebar-link">对于前端工程化的理解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E5%AF%B9%E4%BA%8E%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%9A%84%E7%90%86%E8%A7%A3/#模块化" class="sidebar-link">模块化</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E5%AF%B9%E4%BA%8E%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%9A%84%E7%90%86%E8%A7%A3/#组件化" class="sidebar-link">组件化</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E5%AF%B9%E4%BA%8E%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%9A%84%E7%90%86%E8%A7%A3/#规范化" class="sidebar-link">规范化</a></li><li class="sidebar-sub-header"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E5%AF%B9%E4%BA%8E%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%9A%84%E7%90%86%E8%A7%A3/#自动化" class="sidebar-link">自动化</a></li></ul></li><li><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E9%92%88%E5%AF%B9%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%BA%94%E7%94%A8%E7%9A%84%E4%BC%98%E5%8C%96/" class="sidebar-link">针对移动端应用的优化建议</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">微信小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading clickable"><!----> <span class="title">性能优化问题</span> <span class="arrow right"></span></p> <!----></section></li></ul> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">webpack</span></h1> <div class="page-info"><!----> <span aria-label="Author🖊" data-balloon-pos="down" categoryPath="/category/$category/" tagPath="/tag/$tag/"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon author-icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z" fill="currentColor"></path></svg> <span property="author">Youky</span></span><span aria-label="Page views🔢" data-balloon-pos="down" defaultAuthor="Youky" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="visitor-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon eye-icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 0 0-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z" fill="currentColor"></path></svg> <span id="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/" data-flag-title="webpack" class="leancloud_visitors waline-visitor-count"><span class="leancloud-visitors-count">...</span></span></span><span aria-label="Writing Date📅" data-balloon-pos="down" defaultAuthor="Youky" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2021-10-11</span></span><span role="navigation" aria-label="Category🌈" data-balloon-pos="down" defaultAuthor="Youky" tagPath="/tag/$tag/" class="category-info enable"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon category-icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zm-.854 446.486H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zm446.371-446.486h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zm136.293 813.51H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z" fill="currentColor"></path></svg> <span property="articleSection">前端</span></span><span aria-label="Tags🏷" data-balloon-pos="down" defaultAuthor="Youky" categoryPath="/category/$category/"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon tag-icon"><path d="M939.902 458.563 910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 0 0 0 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z" fill="currentColor"></path></svg> <ul class="tags-wrapper"><li class="tag clickable tag0"><span role="navigation">前端工程化</span></li><li class="tag clickable tag1"><span role="navigation">Webpack</span></li></ul> <meta property="keywords" content="前端工程化,Webpack"></span><span aria-label="Reading Time⌛" data-balloon-pos="down" defaultAuthor="Youky" categoryPath="/category/$category/" tagPath="/tag/$tag/" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 15 min</span> <meta property="timeRequired" content="PT15M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_0-webpack-解决了什么问题" class="anchor-link heading2"><div>0. webpack 解决了什么问题</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_1-模块化的演进过程" class="anchor-link heading2"><div>1. 模块化的演进过程</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#第一阶段、文件划分" class="anchor-link heading3"><div>第一阶段、文件划分</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#第二阶段、命名空间方式" class="anchor-link heading3"><div>第二阶段、命名空间方式</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#第三阶段、iife" class="anchor-link heading3"><div>第三阶段、IIFE</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_2-核心概念" class="anchor-link heading2"><div>2. 核心概念</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#entry" class="anchor-link heading3"><div>entry</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#output" class="anchor-link heading3"><div>output</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#mode" class="anchor-link heading3"><div>mode</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#loader" class="anchor-link heading3"><div>loader</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#plugin" class="anchor-link heading3"><div>plugin</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#loader-和-plugin-的区别" class="anchor-link heading3"><div>loader 和 plugin 的区别</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#编写-loader-和-plugin-的思路" class="anchor-link heading3"><div>编写 loader 和 plugin 的思路</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_3-常见文件的解析" class="anchor-link heading2"><div>3. 常见文件的解析</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#es6" class="anchor-link heading3"><div>ES6</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#样式" class="anchor-link heading3"><div>样式</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#图片-字体" class="anchor-link heading3"><div>图片 / 字体</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_4-文件监听" class="anchor-link heading2"><div>4. 文件监听</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#原理" class="anchor-link heading3"><div>原理</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#配置" class="anchor-link heading3"><div>配置</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_5-webpack-dev-server" class="anchor-link heading2"><div>5. webpack-dev-server</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#使用" class="anchor-link heading3"><div>使用</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#静态资源访问" class="anchor-link heading3"><div>静态资源访问</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#proxy-代理" class="anchor-link heading3"><div>Proxy 代理</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#热更新" class="anchor-link heading3"><div>热更新</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_6-文件指纹" class="anchor-link heading2"><div>6. 文件指纹</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_7-页面公共资源的分离" class="anchor-link heading2"><div>7. 页面公共资源的分离</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#基础库分离-cdn-形式引入" class="anchor-link heading3"><div>基础库分离（CDN 形式引入）</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#提取公共资源" class="anchor-link heading3"><div>提取公共资源</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_8-tree-shaking" class="anchor-link heading2"><div>8. Tree Shaking</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#使用-babel-loader-后失效的问题" class="anchor-link heading3"><div>使用 babel-loader 后失效的问题</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_9-sideeffects" class="anchor-link heading2"><div>9. SideEffects</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_10-sourcemap" class="anchor-link heading2"><div>10. SourceMap</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#eval" class="anchor-link heading3"><div>eval</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#eval-source-map" class="anchor-link heading3"><div>eval-source-map</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#cheap-eval-source-map" class="anchor-link heading3"><div>cheap-eval-source-map</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#cheap-module-eval-source-map" class="anchor-link heading3"><div>cheap-module-eval-source-map</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#nosources-source-map" class="anchor-link heading3"><div>nosources-source-map</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#总结" class="anchor-link heading3"><div>总结</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_11-code-splitting-分块打包" class="anchor-link heading2"><div>11. Code Splitting（分块打包）</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#分包的原因" class="anchor-link heading3"><div>分包的原因</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#多入口打包" class="anchor-link heading3"><div>多入口打包</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#动态导入" class="anchor-link heading3"><div>动态导入</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_12-scope-hoisting" class="anchor-link heading2"><div>12. Scope hoisting</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#要解决的问题" class="anchor-link heading3"><div>要解决的问题</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#原理-2" class="anchor-link heading3"><div>原理</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#使用-3" class="anchor-link heading3"><div>使用</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_13-打包基础库" class="anchor-link heading2"><div>13. 打包基础库</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_14-构建过程分析" class="anchor-link heading2"><div>14. 构建过程分析</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#初级分析-内置的-stats" class="anchor-link heading3"><div>初级分析：内置的 stats</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#速度分析-speed-measure-webpack-plugin" class="anchor-link heading3"><div>速度分析：speed-measure-webpack-plugin</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#体积分析-webpack-bundle-analyzer" class="anchor-link heading3"><div>体积分析：webpack-bundle-analyzer</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#_15-构建优化" class="anchor-link heading2"><div>15. 构建优化</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#多进程并行构建-thread-loader" class="anchor-link heading3"><div>多进程并行构建：thread-loader</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#多进程并行压缩-terserwebpackplugin" class="anchor-link heading3"><div>多进程并行压缩：TerserWebpackPlugin</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#利用缓存-提升二次构建速度" class="anchor-link heading3"><div>利用缓存：提升二次构建速度</div></a></li><li class="anchor"><a href="/%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/Webpack/#优化查找策略" class="anchor-link heading3"><div>优化查找策略</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h1 id="webpack"><a href="#webpack" class="header-anchor">#</a> webpack</h1> <h2 id="_0-webpack-解决了什么问题"><a href="#_0-webpack-解决了什么问题" class="header-anchor">#</a> 0. webpack 解决了什么问题</h2> <p>如何在前端项目中高效的管理和维护项目中的每一个资源。</p> <p>对于 webpack 的自定义设置，通过修改根目录的<code>webpack.config.js</code>文件</p> <h2 id="_1-模块化的演进过程"><a href="#_1-模块化的演进过程" class="header-anchor">#</a> 1. 模块化的演进过程</h2> <h3 id="第一阶段、文件划分"><a href="#第一阶段、文件划分" class="header-anchor">#</a> 第一阶段、文件划分</h3> <blockquote><p>将不同模块放在不同的 js 文件中，再在全局依次引入</p></blockquote> <p>存在的问题：</p> <ul><li>模块直接在全局工作，污染全局作用域，容易产生命名冲突</li> <li>没有私有空间，模块成员可能在外部被修改</li> <li>无法管理模块间的依赖关系</li> <li>难以分辨某个成员所属的模块</li></ul> <h3 id="第二阶段、命名空间方式"><a href="#第二阶段、命名空间方式" class="header-anchor">#</a> 第二阶段、命名空间方式</h3> <blockquote><p>将不同模块挂载到 window 的一个属性上</p></blockquote> <p>解决了命名空间问题，其他问题依旧存在</p> <h3 id="第三阶段、iife"><a href="#第三阶段、iife" class="header-anchor">#</a> 第三阶段、IIFE</h3> <blockquote><p>利用立即执行函数</p></blockquote> <ul><li>实现了私有变量</li> <li>通过给立即执行函数传入参数实现依赖，可以在日后方便的判断模块的依赖关系</li></ul> <p>仍存在的问题：<strong>模块的加载</strong></p> <h2 id="_2-核心概念"><a href="#_2-核心概念" class="header-anchor">#</a> 2. 核心概念</h2> <h3 id="entry"><a href="#entry" class="header-anchor">#</a> entry</h3> <blockquote><p>打包的入口</p></blockquote> <p>打包项目时，entry 为指定的打包入口，从入口文件开始构建<strong>依赖图</strong>，来将所有被引用的文件进行打包。</p> <p>entry 的取值分为两种情况：</p> <ul><li>单入口：取值为字符串</li> <li>多入口：取值为对象</li></ul> <h3 id="output"><a href="#output" class="header-anchor">#</a> output</h3> <blockquote><p>打包的输出</p></blockquote> <p>对于单入口和多入口打包：都只指定一个输出的<code>filename</code>和<code>path</code>。</p> <p>当具有多个入口时，默认输出到 dist 目录下，文件名同入口文件名。</p> <p>可以通过文件占位符（<code>[name]</code>）来表示入口文件名，并在此基础上进行修改，来区分打包结果的名称</p> <h3 id="mode"><a href="#mode" class="header-anchor">#</a> mode</h3> <p>用来指定当前的环境，取值有：</p> <ul><li>production</li> <li>development</li> <li>none</li></ul> <p>**作用：**自动开启 webpack 内置的函数，在不同模式下开启不同的功能</p> <h3 id="loader"><a href="#loader" class="header-anchor">#</a> loader</h3> <p>webpack 默认的 loader 只能加载<code>js</code>和<code>JSON</code>文件，要加载 css 等其他文件，就要给文件设置对应的 loader。</p> <h4 id="设置方法"><a href="#设置方法" class="header-anchor">#</a> 设置方法</h4> <p>在配置添加<code>module.rules</code>字段，取值为一个数组。</p> <p>每一项是针对某类文件使用的<code>loader</code>，包含两个属性：</p> <ul><li><code>test</code>：取值为正则表达式，表示匹配的文件类型</li> <li><code>use</code>：使用的 loader。
<ul><li>如果只使用一个 loader，取值为一个<strong>字符串</strong></li> <li>如果使用多个 loader，取值为一个<strong>数组</strong>。数组中的所有 loader<strong>从后向前</strong>执行</li></ul></li></ul> <h4 id="常用的-loader"><a href="#常用的-loader" class="header-anchor">#</a> 常用的 loader</h4> <ul><li>样式：
<ul><li>css-loader</li> <li>style-loader</li> <li>stylus-loader</li></ul></li> <li>编译：
<ul><li>babel-loader</li> <li>ts-loader</li> <li>eslint-loader</li></ul></li> <li>文件：
<ul><li>file-loader</li> <li>url-loader</li></ul></li></ul> <h3 id="plugin"><a href="#plugin" class="header-anchor">#</a> plugin</h3> <p>目的：增强 webpack<strong>自动化构建</strong>各方面的能力</p> <h4 id="配置方法"><a href="#配置方法" class="header-anchor">#</a> 配置方法</h4> <ul><li>引入插件（一般是一个构造函数）</li> <li>在配置对象的<code>plugins</code>数组中添加（用 new 实例化）</li></ul> <h4 id="常见-plugin"><a href="#常见-plugin" class="header-anchor">#</a> 常见 plugin</h4> <ul><li>打包前清除 dist 目录</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CleanWebpackPlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;clean-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>自动生成 HTML</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 对于输出html的自定义配置对象</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 页面title</span>
      <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// meta信息</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 打包输出多个html</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 输出的html文件名，默认是index.html</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>将静态资源文件复制到打包后的目录</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>'copy<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin<span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token string">'public'</span>  <span class="token comment">// 要打包的静态资源的目录</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>热更新插件：<code>HotModuleReplacementPlugin</code></li> <li>压缩打包后的输出文件：<code>terser-webpack-plugin</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;terser-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">minimize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>注入一些会发生变化的值，如 API 地址：<code>webpack.DefinePlugin</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> DefinePlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;webpack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 注入的值会作为字符串直接替换到代码中使用到的地方</span>
      <span class="token constant">FOO_BAR</span><span class="token operator">:</span> <span class="token string">&quot;something&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// src/main.js</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token constant">FOO_BAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'something'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="loader-和-plugin-的区别"><a href="#loader-和-plugin-的区别" class="header-anchor">#</a> loader 和 plugin 的区别</h3> <ul><li>loader 是加载器，用于将 A 文件编译为 B 文件，即进行<strong>文件转换</strong>。loader 是一个函数，接收源文件为参数，返回目标文件。</li> <li>plugin 用于扩展 webpack 的功能，可以控制<strong>打包的每个环节</strong>。是<strong>基于事件机制</strong>工作，会监听打包过程中的某些节点，并执行任务</li></ul> <h3 id="编写-loader-和-plugin-的思路"><a href="#编写-loader-和-plugin-的思路" class="header-anchor">#</a> 编写 loader 和 plugin 的思路</h3> <h4 id="loader-2"><a href="#loader-2" class="header-anchor">#</a> loader</h4> <p>loader 的本质是一个函数，接受源码并返回转换后的代码。</p> <p>其 this 会被 webpack 填充（因此不能使用箭头函数）；接受一个参数，为 webpack 提供的源码。</p> <p>返回结果可以是同步或异步的，异步返回是使用 this.callback 进行。</p> <h4 id="plugin-2"><a href="#plugin-2" class="header-anchor">#</a> plugin</h4> <p>webpack 基于发布订阅模式，运行的生命周期中会发布很多事件，plugin 通过监听具体的事件可完成自己的需求。</p> <ul><li>plugin 需要是一个<strong>函数</strong>或是<strong>含有 apply 方法的对象</strong></li> <li>根据具体的钩子实现自己功能。异步操作后要调用回调函数通知 webpack 进入下一流程</li></ul> <h2 id="_3-常见文件的解析"><a href="#_3-常见文件的解析" class="header-anchor">#</a> 3. 常见文件的解析</h2> <h3 id="es6"><a href="#es6" class="header-anchor">#</a> ES6</h3> <p>webpack 可以加载 JS 代码，但对于 ES6 的高级语法，需要使用<code>babel-loader</code>进行转换。</p> <ol><li>首先，在<code>module.rules</code>中添加<code>{ test: /.js$/, use: &quot;babel-loader&quot; }</code></li> <li>创建<code>.babelrc</code>文件：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;@babel/preset-env&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="样式"><a href="#样式" class="header-anchor">#</a> 样式</h3> <h4 id="css"><a href="#css" class="header-anchor">#</a> CSS</h4> <p>解析 css 需要至少两个 loader，必须的是<code>css-loader</code>，负责加载.css 文件，并转换为 commonjs 对象。此时样式并没有被真正应用，还需要以下二者之一</p> <ul><li><code>style-loader</code>：将样式通过 style 标签插入<code>head</code>标签中（JS 代码中完成）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
        <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><code>MiniCssExtractPlugin.loader</code>：将 css 提取到独立的 css 文件</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span><span class="token punctuation">{</span>
        <span class="token literal-property property">rule</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.css$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="sass-stylus-less"><a href="#sass-stylus-less" class="header-anchor">#</a> sass/stylus/less</h4> <p>对于<code>sass</code>等预处理器代码，需在末尾再添加一个对应处理器的 loader：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.sass$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
        <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        <span class="token string">'sass-loader'</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="前缀自动补齐"><a href="#前缀自动补齐" class="header-anchor">#</a> 前缀自动补齐</h4> <p>使用<code>postcss-loader</code>可以自动生成如<code>-webkit-</code>等兼容性样式前缀</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.sass$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
        <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token function-variable function">plugins</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'autoprefixer'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">browsers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'&gt;1%'</span><span class="token punctuation">,</span> <span class="token string">'IOS 7'</span><span class="token punctuation">]</span>	<span class="token comment">// 需要兼容的浏览器类型</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="图片-字体"><a href="#图片-字体" class="header-anchor">#</a> 图片 / 字体</h3> <p>对于非代码文件，可以使用<code>file-loader</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.(jpg|png)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
    <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.woff$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
    <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>也可以使用<code>url-loader</code>，其作用和 file-loader 类似，但是可以将小图片转换为 base64 格式：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.(jpg|png)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;url-loader&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">limit</span><span class="token operator">:</span> <span class="token number">10240</span><span class="token punctuation">,</span> <span class="token comment">// 10KB以下的图片会转为base64格式</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_4-文件监听"><a href="#_4-文件监听" class="header-anchor">#</a> 4. 文件监听</h2> <h3 id="原理"><a href="#原理" class="header-anchor">#</a> 原理</h3> <p>持续轮询，判断文件的<strong>最后编辑时间</strong>是否发生变化。检测到变化后不会立即告诉监听者，而是先进行<strong>缓存</strong>，等待一个<code>aggregateTimeout</code> 后统一处理。</p> <p><strong>缺点</strong>：需要手动刷新浏览器才能更新。</p> <p><strong>解决办法</strong>：热更新（<code>dev-server</code>）</p> <h3 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>					<span class="token comment">// 开启文件监听，默认false</span>
    <span class="token literal-property property">watchOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    	<span class="token literal-property property">ignored</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_module</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>		<span class="token comment">// 忽略这部分的变化</span>
    	<span class="token literal-property property">poll</span><span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>					<span class="token comment">// 每秒轮询次数，默认1000次</span>
    	<span class="token literal-property property">aggregateTimeout</span><span class="token operator">:</span> <span class="token number">300</span><span class="token punctuation">,</span>		<span class="token comment">// 监听到变化后的延迟，默认300ms</span>
  	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_5-webpack-dev-server"><a href="#_5-webpack-dev-server" class="header-anchor">#</a> 5. webpack-dev-server</h2> <p>官方提供的开发服务器，提供了自动编译、热更新等功能</p> <p>为了提高构建速度，webpack-dev-server 并不是将打包结果写入磁盘，而是存到<strong>内存</strong>中。</p> <p>配置对象的 devServer 属性用来提供配置，<a href="https://webpack.js.org/configuration/dev-server/" target="_blank" rel="noopener noreferrer">详细配置文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ./webpack.config.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">directory</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;public&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 静态资源路径</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否开启压缩</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">9000</span><span class="token punctuation">,</span> <span class="token comment">// 端口号</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <ul><li>安装依赖：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-D</span> webpack-dev-server
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>启动服务：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>npx webpack serve
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="静态资源访问"><a href="#静态资源访问" class="header-anchor">#</a> 静态资源访问</h3> <p>除了构建过程中会被打包的资源，要让其它资源可访问，就要向 contentBase 传入静态资源的路径。</p> <blockquote><p>为什么不通过<code>copy-webpack-plugin</code>将静态资源加入打包结果？</p></blockquote> <p>使用<code>copy-webpack-plugin</code>会进行磁盘 IO，在开发过程中影响效率。</p> <h3 id="proxy-代理"><a href="#proxy-代理" class="header-anchor">#</a> Proxy 代理</h3> <p>由于本地应用是运行在 localhost 的临时服务器上，一些生产环境下能直接访问的 API 在开发时会产生跨域问题。</p> <p>在 devServer 中添加 proxy 属性，其取值为一个对象。</p> <p>将<code>http://localhost:8080/api/foo</code>代理到<code>https://api.github.com/foo</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ./webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;/api&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// 代理/api开头的请求。即为了代理所有请求，将所有请求的开头添加一个/api</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&quot;https://api.github.com&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;^/api&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 替换掉代理地址中的 /api</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 确保请求 GitHub 的主机名就是：api.github.com</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="热更新"><a href="#热更新" class="header-anchor">#</a> 热更新</h3> <p>对于文件的热更新，提供了开箱即用的 plugin</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>      <span class="token comment">// 开启 HMR 特性，如果资源不支持或代码报错，会回退到直接刷新</span>
  <span class="token literal-property property">hotOnly</span><span class="token operator">:</span> <span class="token boolean">true</span>   <span class="token comment">// 只使用 HMR，不会回退</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>回退到直接刷新会怎么样？</p></blockquote> <p>直接刷新后，将无法看到代码中的报错</p> <h2 id="_6-文件指纹"><a href="#_6-文件指纹" class="header-anchor">#</a> 6. 文件指纹</h2> <blockquote><p>打包后输出文件名的后缀</p></blockquote> <h4 id="目的"><a href="#目的" class="header-anchor">#</a> 目的</h4> <ul><li>便于版本管理</li> <li>未修改的文件名称不变，便于使用浏览器缓存</li></ul> <h4 id="常见类型"><a href="#常见类型" class="header-anchor">#</a> 常见类型</h4> <ul><li><code>hash</code>：和整个项目的构建相关。只要项目中有文件修改，hash 值就会改变</li> <li><code>chunkhash</code>：和打包的 chunk 相关。不同的 entry 会生成不同的 chunk。即一个入口内的文件改变后，该入口下引用的文件的 chunkhash 会变</li> <li><code>contenthash</code>：根据文件内容定义 hash。文件内容不变则 contenthash 不变</li></ul> <h4 id="使用-2"><a href="#使用-2" class="header-anchor">#</a> 使用</h4> <p><strong>对于 JS 文件</strong>：修改 output 选项即可</p> <ul><li><code>[name]</code>表示文件名</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;[name]_[chunkhash].js&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>**对于图片/字体等：**修改 loader 的 option</p> <ul><li><code>[ext]</code>表示文件后缀</li> <li><code>[hash:8]</code>表示取前八位的文件 hash 值（由 md5 生成）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.(jpg|png)$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">&quot;file-loader&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;[name]_[hash:8].[ext]&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_7-页面公共资源的分离"><a href="#_7-页面公共资源的分离" class="header-anchor">#</a> 7. 页面公共资源的分离</h2> <blockquote><p>module、bundle、chunk 分别是什么含义？</p></blockquote> <p>Webpack 的作用是将任意模块依赖（js 和非 js 资源如 css、图片等）打包成静态资源，其中：</p> <ul><li><strong>module</strong>：js 文件、css 文件、jpg 文件等打包前的文件</li> <li><strong>bundle</strong>：打包后生成的产物</li> <li><strong>chunk</strong>：对于 bundle 进行拆分，bundle 的一部分</li></ul> <h3 id="基础库分离-cdn-形式引入"><a href="#基础库分离-cdn-形式引入" class="header-anchor">#</a> 基础库分离（CDN 形式引入）</h3> <p>默认情况下，使用 React/Vue 等框架开发的项目打包时会将框架代码一并打包到结果中。</p> <p>使用 <code>html-webpack-externals-plugin</code> 可以将公共库提取出来，单独通过 CDN 引入，以减少打包结果的大小。</p> <ul><li><code>module</code>：公共库的名字、</li> <li><code>entry</code>：库的 CDN 地址</li> <li><code>global</code>：公共库全局导出的变量名</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> HtmlWebpackExternalsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-externals-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackExternalsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">externals</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 公共库的名字</span>
          <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&quot;https://unpkg.com/react@16/umd/react.production.min.js&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">global</span><span class="token operator">:</span> <span class="token string">&quot;React&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 公共库全局导出的变量名</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token string">&quot;react-dom&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">entry</span><span class="token operator">:</span>
            <span class="token string">&quot;https://unpkg.com/react-dom@16/umd/react-dom.production.min.js&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">global</span><span class="token operator">:</span> <span class="token string">&quot;ReactDOM&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="提取公共资源"><a href="#提取公共资源" class="header-anchor">#</a> 提取公共资源</h3> <p>使用 <code>optimization.splitChunks</code> 设置。可以自定义要提取的公共包的大小、类型等</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
	<span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      	<span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span> 					<span class="token comment">// 对所有引入方式的包都做分包</span>
      	<span class="token literal-property property">minSize</span><span class="token operator">:</span> <span class="token number">20000</span><span class="token punctuation">,</span> 				<span class="token comment">// 打包前体积小于20k的包不会做分包处理</span>
      	<span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> 					<span class="token comment">// 最小被引用次数</span>
      	<span class="token literal-property property">enforceSizeThreshold</span><span class="token operator">:</span> <span class="token number">50000</span><span class="token punctuation">,</span> 	<span class="token comment">// 如果某个包超过了50K则强制进行拆分</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
  	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>​</p> <h2 id="_8-tree-shaking"><a href="#_8-tree-shaking" class="header-anchor">#</a> 8. Tree Shaking</h2> <blockquote><p>在打包结果中筛选掉未引用的代码（<strong>不是整个模块，其中的副作用代码仍会生效</strong>）</p></blockquote> <p>在<code>production</code>模式下会自动开启。在非生产模式下设置<code>optimization</code>：</p> <ul><li><code>usedExports</code>设置为 true，表示只导出使用到的成员</li> <li><code>minimize</code>设置为 true，表示压缩代码</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">usedExports</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minimize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="使用-babel-loader-后失效的问题"><a href="#使用-babel-loader-后失效的问题" class="header-anchor">#</a> 使用 babel-loader 后失效的问题</h3> <p>在某些版本的<code>babel-loader</code>中，会将 ESModule 代码编译为 CommonJS 形式。</p> <blockquote><p>最新版的 babel-loader 中，会根据环境禁用对 ES Module 的转换，因此不会带来这个问题</p></blockquote> <p>而 webpack 中 Tree Shaking 的前提是 ES Module 代码，因此可能导致其失效</p> <h2 id="_9-sideeffects"><a href="#_9-sideeffects" class="header-anchor">#</a> 9. SideEffects</h2> <blockquote><p>完整移除整个没有使用的模块</p></blockquote> <p>在<code>production</code>模式下会自动开启。在非生产模式下：</p> <ul><li>设置<code>optimization.sideEffects:true</code></li> <li>在<code>package.json</code>中添加<code>sideEffects</code>属性
<ul><li>取值为 false，表示所有模块都没有副作用</li> <li>取值为数组，每个元素表示需要保留副作用的路径</li></ul></li></ul> <h2 id="_10-sourcemap"><a href="#_10-sourcemap" class="header-anchor">#</a> 10. SourceMap</h2> <blockquote><p>提供源代码和打包后代码间的映射关系</p></blockquote> <p>目的：在有报错时能找到源码中对应的位置</p> <p>通常 sourceMap 文件以.map 结尾，是一个 JSON 格式的对象。</p> <p>在打包后的代码中，通过注释的形式引入 SourceMap 文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>//# sourceMappingUrl=xxx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>配置方法：修改配置对象的<code>devtool</code>属性决定选用的模式。不同的模式决定了构建速度和品质的不同。</p> <h3 id="eval"><a href="#eval" class="header-anchor">#</a> eval</h3> <p>将模块放在 eval 函数中，通过添加注释的方法来判断属于哪个源文件。</p> <p>优点：没有生成 sourceMap，构建速度最快</p> <p>缺点：只能定位到文件，不能定位到具体的行列</p> <h3 id="eval-source-map"><a href="#eval-source-map" class="header-anchor">#</a> eval-source-map</h3> <p>生成了 sourceMap，可以反推到源码中的行列信息</p> <h3 id="cheap-eval-source-map"><a href="#cheap-eval-source-map" class="header-anchor">#</a> cheap-eval-source-map</h3> <p>只能定位到行，不能定位到列。构建速度比<code>eval-source-map</code>更快</p> <h3 id="cheap-module-eval-source-map"><a href="#cheap-module-eval-source-map" class="header-anchor">#</a> cheap-module-eval-source-map</h3> <p>定位到的是未经转换的源码</p> <h3 id="nosources-source-map"><a href="#nosources-source-map" class="header-anchor">#</a> nosources-source-map</h3> <p>能看到错误位置，但点进去看不到源代码</p> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <ul><li>带 source-map 的是生成了 sourceMap 文件的</li> <li>带 cheap 的构建更快，但只能定位到行，不能定位到列</li> <li>带 module 的是定位到未经过 Loader 加工的源码，不带 module 的是经过 loader 加工的</li></ul> <p>在开发中，优先选用<code>cheap-module-eval-source-map</code>：</p> <ul><li>对于 React 和 Vue 等框架，经过 loader 转换后的代码会有很大的变化，无法定位问题</li> <li>养成良好的编码习惯，一行不会有太多内容，定位到行足够找出问题了</li></ul> <p>在上线版本中，选用<code>none</code>，即不生成 sourceMap：</p> <ul><li>调试应该是开发中的事，不应在上线代码中 debug</li> <li>生成 sourceMap 会暴露源代码，带来安全隐患</li></ul> <h2 id="_11-code-splitting-分块打包"><a href="#_11-code-splitting-分块打包" class="header-anchor">#</a> 11. Code Splitting（分块打包）</h2> <h3 id="分包的原因"><a href="#分包的原因" class="header-anchor">#</a> 分包的原因</h3> <p><strong>打包结果太过集中的弊端：</strong></p> <ul><li>打包结果的体积太大</li> <li>不能做到按需加载，影响首屏时间</li></ul> <p><strong>打包结果太过分散的弊端：</strong></p> <ul><li>多次请求本身会有延迟</li> <li>每次请求的请求头带来额外的带宽消耗</li></ul> <p>webpack 实现分包的方式有两种：</p> <ol><li>多入口，多出口</li> <li>根据 ES Module 的动态导入特性，按需加载模块</li></ol> <h3 id="多入口打包"><a href="#多入口打包" class="header-anchor">#</a> 多入口打包</h3> <p>多用于传统的<code>多页应用</code>，一个页面对应一个打包入口。对于不同页面的公共部分，提取到公共结果中。</p> <ol><li>首先，在 entry 中设置多个入口</li> <li>修改<code>output</code>，<code>[name]</code>作为占位符表示入口名称</li> <li>设置<code>HtmlWebpackPlugin</code>的<code>chunks</code>属性，使其只加载对应的文件</li> <li>设置<code>optimization.splitChunks.chunks</code>为<code>'all'</code>，表示将公共部分自动分包</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">index</span><span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&quot;./src/foo.js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;[name].bundle.js&quot;</span><span class="token punctuation">,</span> <span class="token comment">// [name] 是入口名称</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;index.html&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;foo.html&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;foo&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">splitChunks</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="动态导入"><a href="#动态导入" class="header-anchor">#</a> 动态导入</h3> <p>使用 ES Modules 的<code>import</code>函数，无需其他配置即可完成。</p> <h4 id="魔法注释"><a href="#魔法注释" class="header-anchor">#</a> 魔法注释</h4> <p>如果需要给动态导入的模块命名，可以在 import 函数中添加行内注释。格式为<code>/* webpackChunkName: 'name' */</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: 'foo' */</span> <span class="token string">&quot;./foo/foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token keyword">default</span><span class="token operator">:</span> foo <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something with foo...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果两个模块的注释一样的话，会打包到一个文件中，借助这个特点可以自己更加细致的控制分包的结果。</p> <h2 id="_12-scope-hoisting"><a href="#_12-scope-hoisting" class="header-anchor">#</a> 12. Scope hoisting</h2> <h3 id="要解决的问题"><a href="#要解决的问题" class="header-anchor">#</a> 要解决的问题</h3> <p>构建后的代码中存在大量的闭包代码，导致：</p> <ol><li>打包产物的体积增大</li> <li>运行时创建的函数作用域变多，增大内存开销</li></ol> <h3 id="原理-2"><a href="#原理-2" class="header-anchor">#</a> 原理</h3> <p>将<strong>只被引用了一次的模块</strong>按引用顺序放在<strong>一个函数作用域</strong>里。</p> <h3 id="使用-3"><a href="#使用-3" class="header-anchor">#</a> 使用</h3> <ul><li><code>production</code>模式下会默认开启</li> <li>手动添加<code>new webpack.optimize.ModuleConcatenationPlugin()</code></li></ul> <h2 id="_13-打包基础库"><a href="#_13-打包基础库" class="header-anchor">#</a> 13. 打包基础库</h2> <p>对于基础库的打包，一般会打包出未压缩和压缩后的两种版本。</p> <ul><li>entry 中设置两个入口，指向同一个文件</li> <li>output 中，<code>library</code>属性指明库的导出情况</li> <li><code>mode</code>设为 none，利用<code>TerserPlugin</code>选择性进行压缩</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">sum</span><span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;sum.min&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./src/index.js&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;[name].js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">library</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;sum&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 暴露的库的名称</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;umd&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 允许在所有模块定义下暴露本库</span>
      <span class="token keyword">export</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 使用默认导出，否则引入时需要使用.default获取默认导出的内容</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">minimize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">include</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.min\.js$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><code>package.json</code>中的<code>main</code>字段指向 index.js，在其中通过判断环境参数，返回 dist 中对应的文件</p> <h2 id="_14-构建过程分析"><a href="#_14-构建过程分析" class="header-anchor">#</a> 14. 构建过程分析</h2> <h3 id="初级分析-内置的-stats"><a href="#初级分析-内置的-stats" class="header-anchor">#</a> 初级分析：内置的 stats</h3> <p>在 package.json 中添加命令：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>webpack <span class="token parameter variable">--config</span> src/ <span class="token parameter variable">--json</span> <span class="token operator">&gt;</span> stats.json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>构建后会在目录下生成 stats.json 文件。</p> <h3 id="速度分析-speed-measure-webpack-plugin"><a href="#速度分析-speed-measure-webpack-plugin" class="header-anchor">#</a> 速度分析：speed-measure-webpack-plugin</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> SpeedMeasurePlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;speed-measure-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> smp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpeedMeasurePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> smp<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="体积分析-webpack-bundle-analyzer"><a href="#体积分析-webpack-bundle-analyzer" class="header-anchor">#</a> 体积分析：webpack-bundle-analyzer</h3> <p>打包后默认在 8888 端口打开页面显示各个 bundle 大小情况</p> <h2 id="_15-构建优化"><a href="#_15-构建优化" class="header-anchor">#</a> 15. 构建优化</h2> <h3 id="多进程并行构建-thread-loader"><a href="#多进程并行构建-thread-loader" class="header-anchor">#</a> 多进程并行构建：thread-loader</h3> <h4 id="原理-3"><a href="#原理-3" class="header-anchor">#</a> 原理</h4> <p>将打包任务划分为多个 node 进程，将任务依次分配给这些进程。</p> <h4 id="使用-4"><a href="#使用-4" class="header-anchor">#</a> 使用</h4> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;thread-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;expensive-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="多进程并行压缩-terserwebpackplugin"><a href="#多进程并行压缩-terserwebpackplugin" class="header-anchor">#</a> 多进程并行压缩：TerserWebpackPlugin</h3> <p>webpack5 开箱即带，但如果需要自定义配置，仍需自己安装：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>npm install terser-webpack-plugin -D
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;terser-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">optimization</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">minimize</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">minimizer</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="利用缓存-提升二次构建速度"><a href="#利用缓存-提升二次构建速度" class="header-anchor">#</a> 利用缓存：提升二次构建速度</h3> <h4 id="babel-loader"><a href="#babel-loader" class="header-anchor">#</a> babel-loader</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;babel-loader?cacheDirectory&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="hardsourcewebpackplugin"><a href="#hardsourcewebpackplugin" class="header-anchor">#</a> HardSourceWebpackPlugin</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> HardSourceWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;hard-source-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HardSourceWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="优化查找策略"><a href="#优化查找策略" class="header-anchor">#</a> 优化查找策略</h3> <p>通过<code>resolve</code>字段优化模块解析的策略：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">Utilities</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;src/utilities/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 引用时可以使用别名</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mainFields</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;main&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 使用package.json中的main字段作为入口</span>
    <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 以node_modules作为查找入口</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><!----> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">October 16, 2022 21:28</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: 1911303982@qq.com" class="contributor">
          youky7
        </span> , <span title="email: 1911303982@qq.com" class="contributor">
          Youky
        </span> <!----></span></div></footer> <!----> <!----> <!----> <div class="content__page-bottom"></div></main> <!----></div><div class="global-ui"><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><!----><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.300783a1.js" defer></script><script src="/assets/js/vendors~layout-Layout.ffcec671.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.61e71969.js" defer></script><script src="/assets/js/page-webpack.c86daeff.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout.ec610c62.js" defer></script>
  </body>
</html>
